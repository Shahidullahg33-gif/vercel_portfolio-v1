/* Base design tokens */
:root {
  --font-serif: Georgia, ui-serif, serif;
  --font-sans: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Fira Sans', 'Droid Sans', 'Helvetica Neue', Arial, sans-serif;
  --fs--1: clamp(.82rem,.8rem + .2vw,.9rem);
  --fs-0: clamp(.95rem,.9rem + .35vw,1.05rem);
  --fs-1: clamp(1.15rem,1.05rem + .6vw,1.35rem);
  --fs-2: clamp(1.35rem,1.2rem + 1vw,1.8rem);
  --fs-3: clamp(1.7rem,1.4rem + 1.8vw,2.3rem);
  --fs-4: clamp(2.1rem,1.6rem + 2.8vw,3.1rem);
  --fs-5: clamp(2.7rem,1.8rem + 4vw,4rem);
  --lh-body:1.6;--lh-long:1.68;--measure:70ch;
  --space-xs:.5rem;--space-sm:.75rem;--space-md:1.1rem;--space-lg:1.75rem;--space-xl:2.5rem;
  --radius-sm:.3rem;--radius-md:.6rem;--radius-lg:1rem;
  --dur-xs:120ms;--dur-sm:180ms;--dur-md:250ms;--dur-lg:400ms;--ease:cubic-bezier(.16,.84,.44,1);
  --c-bg:#ffffff;--c-surface:#ffffff;--c-muted:#ececec;--c-border:#d0d4d9;--c-text:#0f172a;--c-text-alt:#485160;--c-accent:#ff6b35;--c-accent-alt:#2a9d8f;--c-on-accent:#ffffff;--c-info:#4F46E5;--c-danger:#DC2626;
  color-scheme:light;
}

[data-theme='dark'] { --c-bg:#0F1115;--c-surface:#161A21;--c-muted:#232A33;--c-border:#2d3440;--c-text:#F5F7FA;--c-text-alt:#c7d0d9;--c-accent:#FF6B35;--c-accent-alt:#2A9D8F;--c-on-accent:#ffffff; color-scheme:dark; }
[data-theme='soothing'] { --c-bg:#F6F5F3;--c-surface:#FFFFFF;--c-text:#2F3942;--c-text-alt:#55606a;--c-accent:#8FBF9F;--c-accent-alt:#F2B8B5;--c-on-accent:#2F3942; }
[data-theme='minimalist'] { --c-bg:#FFFFFF;--c-surface:#FAFAFA;--c-text:#111;--c-text-alt:#555;--c-accent:#2563EB;--c-accent-alt:#555;--c-on-accent:#ffffff; }
[data-theme='colorful'] { --c-bg:#0D1321;--c-surface:#FFE66D;--c-text:#FFE66D;--c-text-alt:#182335;--c-accent:#EF476F;--c-accent-alt:#06D6A0;--c-on-accent:#FFFFFF; }

/* Theme background strategies */
html { background: var(--c-bg); color: var(--c-text); }
/* Semantic text helpers */
.text-alt { color: var(--c-text-alt); }
.text-primary { color: var(--c-text); }
.muted { color: var(--c-text-alt); }
.icon-muted { color: var(--c-text-alt); transition:color .25s var(--ease); }
.group:hover .icon-muted { color: var(--c-text); }
.faded { color: color-mix(in srgb,var(--c-text) 78%, transparent); }
.on-accent { color: var(--c-on-accent,#fff); }
[data-theme='dark'] body { background:
  radial-gradient(circle at 15% 20%,rgba(255,107,53,.08),transparent 60%),
  radial-gradient(circle at 80% 70%,rgba(42,157,143,.08),transparent 55%),
  linear-gradient(145deg,#0F1115,#161A21 60%,#0F1115);
  background-attachment: fixed; }
[data-theme='soothing'] body { background: linear-gradient(180deg,#F6F5F3,#FFFFFF 60%); }
[data-theme='minimalist'] body { background:#FFFFFF; }
[data-theme='colorful'] body { background: linear-gradient(140deg,#0D1321 10%,#111f34 45%,#0D1321 90%); }

/* Navigation variants */
.site-nav { backdrop-filter: blur(10px); display:flex; flex-direction:column; }
[data-theme='dark'] .site-nav { background:rgba(15,17,21,.55); border-bottom:1px solid #232A33; }
[data-theme='soothing'] .site-nav { background:rgba(255,255,255,.75); border-bottom:1px solid #E4E2DE; }
[data-theme='minimalist'] .site-nav { background:#FFFFFF; border-bottom:1px solid #E5E5E5; }
[data-theme='colorful'] .site-nav { background:linear-gradient(90deg,#EF476F,#FFD166,#06D6A0); }
.site-nav.nav-scrolled { box-shadow:0 4px 14px -6px rgba(0,0,0,.35); }
[data-theme='minimalist'] .site-nav.nav-scrolled { box-shadow:none; }
nav .nav-link { position:relative; }
nav .nav-link.is-active::after { content:""; position:absolute; left:0; right:0; bottom:2px; height:2px; background:var(--c-accent); }
[data-theme='colorful'] nav .nav-link.is-active { background:linear-gradient(90deg,var(--c-accent),var(--c-accent-alt)); -webkit-background-clip:text; background-clip:text; color:transparent; }

/* Buttons */
.btn { --btn-bg:var(--c-accent); --btn-fg:#fff; --btn-border:var(--c-accent); display:inline-flex; align-items:center; gap:.5ch; font-weight:500; padding:.65rem 1.1rem; border-radius:var(--radius-sm); background:var(--btn-bg); color:var(--btn-fg); border:1px solid var(--btn-border); line-height:1.2; transition:background var(--dur-sm) var(--ease),color var(--dur-sm) var(--ease),box-shadow var(--dur-sm) var(--ease); }
.btn-outline { background:transparent; color:var(--c-accent); }
.btn-outline:hover { background:var(--c-accent); color:#fff; }
[data-theme='minimalist'] .btn { background:#fff; color:var(--c-accent); border:1px solid #D0D4D9; }
[data-theme='minimalist'] .btn:hover { background:var(--c-accent); color:#fff; }
[data-theme='colorful'] .btn { background:linear-gradient(90deg,var(--c-accent),var(--c-accent-alt)); }
[data-theme='dark'] .btn:hover { box-shadow:0 0 0 3px rgba(255,107,53,.25); }
[data-theme='soothing'] .btn { background:var(--c-accent); color:#2F3942; }

/* Links */
.prose a { text-decoration:underline; text-decoration-thickness:2px; text-underline-offset:3px; transition:color var(--dur-xs) var(--ease), text-decoration-color var(--dur-xs) var(--ease); }
[data-theme='dark'] .prose a:hover { color:var(--c-accent); }
[data-theme='minimalist'] .prose a { text-decoration-thickness:1px; }
[data-theme='colorful'] .prose a { background:linear-gradient(90deg,var(--c-accent),var(--c-accent-alt)); -webkit-background-clip:text; background-clip:text; color:transparent; }

/* Focus ring */
:focus-visible { outline:2px solid var(--c-accent); outline-offset:3px; border-radius:4px; }
[data-theme='colorful'] :focus-visible { outline:2px solid var(--c-accent-alt); }

/* Reading mode & font scaling */
html.font-scale-lg { font-size:112%; }
html.font-scale-xl { font-size:120%; }
html.reading-mode body { max-width:70ch; margin-inline:auto; }
html.reading-mode .site-nav, html.reading-mode #scroll-progress { position:sticky; }

/* Article content ergonomics */
.article-content { max-width:70ch; }
.article-content p { hyphens:auto; hanging-punctuation:first last; }
[data-theme='minimalist'] .article-content { background:#fff; color:#111; }

/* Content visibility performance */
.cv-auto { content-visibility:auto; contain-intrinsic-size: 1000px 800px; }

/* Dark theme heading underline hover color shift */
[data-theme='dark'] h2, [data-theme='dark'] h3 { position:relative; }
[data-theme='dark'] h2:hover::after, [data-theme='dark'] h3:hover::after { background:linear-gradient(90deg,var(--c-accent),var(--c-accent-alt)); }
[data-theme='dark'] h2::after, [data-theme='dark'] h3::after { content:""; position:absolute; left:0; bottom:-4px; width:60px; height:3px; background:var(--c-accent); transition:background var(--dur-sm) var(--ease); }

/* Colorful hue rotate decorative (applied to elements with class .decor) */
[data-theme='colorful'] .decor { animation:huerotate 60s linear infinite; }
@keyframes huerotate { to { filter:hue-rotate(360deg); } }

/* Minimalist gradient overrides */
[data-theme='minimalist'] .text-gradient { background:none !important; -webkit-text-fill-color: currentColor; color: currentColor; animation:none; }
[data-theme='minimalist'] .btn { box-shadow:none; }

/* Container queries */
.case-grid, .services-grid { container-type:inline-size; }
@container (min-width:650px) {
  .case-grid article, .services-grid > div { padding:2rem; }
  .case-grid article h2 { font-size:clamp(1.4rem,1.1rem + 1vw,2rem); }
}
@container (min-width:960px) {
  .case-grid { grid-template-columns:repeat(2,1fr); }
}

/* Margin notes / blockquotes elevated */
.article-content blockquote { position:relative; margin:1.5rem 0; padding:1rem 1.25rem; border-left:4px solid var(--c-accent-dynamic,var(--c-accent)); background:linear-gradient(90deg,var(--c-accent-dynamic,var(--c-accent))10%,transparent); background-size:200% 100%; background-position:0 0; transition:background-position var(--dur-md) var(--ease); }
.article-content blockquote:hover { background-position:100% 0; }
@media (min-width:1100px) {
  .article-content blockquote { float:right; width:40%; margin:0 0 1.5rem 1.5rem; font-size:0.95em; }
  html.reading-mode .article-content blockquote { float:none; width:auto; margin:1.5rem 0; }
}

/* Scroll progress */
#scroll-progress { position:fixed;top:0;left:0;height:4px;background:linear-gradient(90deg,var(--c-accent),var(--c-accent-alt));width:0;z-index:1000;transition:width var(--dur-xs) linear; }

/* Skip link */
.skip-link { position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden; }
.skip-link:focus { left:1rem;top:1rem;width:auto;height:auto;padding:.6rem 1rem;background:var(--c-surface);color:var(--c-text);border:2px solid var(--c-accent);border-radius:var(--radius-sm);z-index:10000; }

/* Reveal animation */
.reveal { opacity:0; transform:translateY(24px); transition:opacity var(--dur-md) var(--ease), transform var(--dur-md) var(--ease); }
.reveal.is-in { opacity:1; transform:none; }
.reduced-motion .reveal { opacity:1 !important; transform:none !important; }

/* Tilt fallback transition */
.tilt { transition:transform var(--dur-sm) var(--ease); will-change:transform; }
.reduced-motion .tilt { transition:none; }

/* Keyword highlight + badges */
.kw-highlight { background: color-mix(in srgb,var(--c-accent) 40%, transparent); padding:0 .15em; border-radius:2px; box-decoration-break:clone; }
.badge { display:inline-flex; align-items:center; gap:.35ch; font-size:.65rem; letter-spacing:.05em; text-transform:uppercase; padding:.35rem .55rem; border:1px solid var(--c-border); border-radius:var(--radius-sm); background:var(--c-surface); color:var(--c-text-alt); font-weight:600; }
.badge.difficulty-easy { border-color: var(--c-accent-alt); color: var(--c-accent-alt); }
.badge.difficulty-intermediate { border-color: var(--c-accent); color: var(--c-accent); }
.badge.difficulty-deep { border-color: var(--c-danger,#B91C1C); color: var(--c-danger,#B91C1C); }
